<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Guide to Licor LI-6800 User Constants • PhotoGEA</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Guide to Licor LI-6800 User Constants">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    padding-top: 70px;

    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PhotoGEA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/PhotoGEA.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/analyzing_ball_berry_data.html">Analyzing Ball-Berry Data</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing_c3_aci_curves.html">Analyzing C3 A-Ci Curves</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing_c4_aci_curves.html">Analyzing C4 A-Ci Curves</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing_gm_data.html">Analyzing Mesophyll Conductance Data</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing_tdl_data.html">Analyzing TDL Data</a></li>
    <li><a class="dropdown-item" href="../articles/combining_with_other_packages.html">Combining PhotoGEA With Other Packages</a></li>
    <li><a class="dropdown-item" href="../articles/creating_your_own_processing_tools.html">Creating Your Own Processing Tools</a></li>
    <li><a class="dropdown-item" href="../articles/developing_a_data_analysis_pipeline.html">Developing a Data Analysis Pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/LI6800_user_constants.html">Guide to Licor LI-6800 User Constants</a></li>
    <li><a class="dropdown-item" href="../articles/working_with_extended_data_frames.html">Working With Extended Data Frames</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/eloch216/PhotoGEA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Guide to Licor LI-6800 User Constants</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/eloch216/PhotoGEA/blob/v1.2.0/vignettes/LI6800_user_constants.Rmd" class="external-link"><code>vignettes/LI6800_user_constants.Rmd</code></a></small>
      <div class="d-none name"><code>LI6800_user_constants.Rmd</code></div>
    </div>

    
    
<style type="text/css">
p.caption {
  font-size: 0.8em;
}
</style>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>When performing gas exchange experiments, measurements of variables
like
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>n</mi></msub><annotation encoding="application/x-tex">A_n</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mi>i</mi></msub><annotation encoding="application/x-tex">C_i</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>g</mi><mrow><mi>s</mi><mi>w</mi></mrow></msub><annotation encoding="application/x-tex">g_{sw}</annotation></semantics></math>
are not the only important pieces of data to record–it’s also crucial to
include information about the particular plant that is being measured,
such as its species or treatment group. Such descriptive data is a type
of <em>metadata</em>, which <a href="https://www.merriam-webster.com/dictionary/metadata" class="external-link">is defined
as</a> “data that provides information about other data.”</p>
<p>Through the “User Constant” interface, Licor LI-6800 instruments
provide a way to include user-defined descriptive metadata in log files,
alongside the measured values that are always recorded. When used
effectively, Licor user constants can be a convenient way to keep track
of metadata, helping to streamline your data analysis workflow.</p>
<p>Simply put, including user constants in your data will make
processing and analyzing the data much easier. There are two main
situations where user constants can help:</p>
<ol style="list-style-type: decimal">
<li><p>Applying an operation to every curve in a data set. This approach
can be used to automate processing steps such as curve fitting. The
image below shows how a curve identifier (a type of metadata that can be
stored as a user constant, or determined from the values of other user
constants) can be used for this purpose.</p></li>
<li><p>Performing statistical operations to compare results across
groups. Following the example in the image below, this could entail
running a <em>t</em>-test to check for signficiant differences in
<em>J</em> between rings.</p></li>
</ol>
<p>Short examples of these applications can be found below in the <a href="#examples-of-user-constant-applications">Examples of User Constant
Applications</a> section, and additional examples can be found
throughout the PhotoGEA documentation, such as the <a href="analyzing_c3_aci_curves.html">Analyzing C3 A-Ci Curves</a>
vignette.</p>
<div class="figure">
<img src="images%2Ftable_processing_illustration.png" alt="Illustration of processing multiple parts of a table using `by` and
  `consolidate`. Here, `id` and `ring` are user constants, where the `id` column
  identifies each individual curve, and the `ring` value indicates whether each
  leaf was grown under ambient (A) or elevated (E) carbon dioxide conditions.
  The processing function fits a single A-Ci curve and returns a list of two
  tables called `fits` and `parameters`." width="95%"><p class="caption">
Illustration of processing multiple parts of a table using
<code>by</code> and <code>consolidate</code>. Here, <code>id</code> and
<code>ring</code> are user constants, where the <code>id</code> column
identifies each individual curve, and the <code>ring</code> value
indicates whether each leaf was grown under ambient (A) or elevated (E)
carbon dioxide conditions. The processing function fits a single A-Ci
curve and returns a list of two tables called <code>fits</code> and
<code>parameters</code>.
</p>
</div>
<p>The first two sections of this vignette provide key advice about how
to set up user constants and what they can be used for:</p>
<ul>
<li><p><a href="#choosing-user-constants">Choosing User Constants</a> –
Advice for choosing pieces of metadata to record, including
examples.</p></li>
<li><p><a href="#using-user-constants">Using User Constants</a> – Advice
for setting up user constants for measurements.</p></li>
</ul>
<p>The later sections include more information about a few related
topics:</p>
<ul>
<li><p><a href="#examples-of-user-constant-applications">Examples of
User Constant Applications</a> – A few short examples of using user
constants when processing and analyzing data, building off the brief
overview above.</p></li>
<li><p><a href="#using-file-names-or-log-remarks">Using File Names or
Log Remarks</a> – A discussion of alternatives to user constants; this
section illustrates why user constants are generally simpler and
easier.</p></li>
<li><p><a href="#how-to-deal-with-files-that-have-no-metadata">How To
Deal With Files That Have No Metadata</a> – A discussion of what to do
with log files where user constants, file names, or log remarks were not
used to record metadata.</p></li>
</ul>
<p>Throughout this vignette, key pieces of advice will be shown in
italics. The final section in the vignette (<a href="#summary-of-advice-for-using-licor-li-6800-user-constants">Summary
of Advice for Using Licor LI-6800 User Constants</a>) contains a list of
all such pieces of advice.</p>
<p>Although this vignette is specialized for Licor LI-6800 instruments,
other gas exchange systems have similar ways to record user constants,
so most of the advice here is general, even if particular details may
change with other instruments. This advice is also specialized for
measuring response curves, but we will sometimes mention other
considerations that may apply when making spot measurements.</p>
<p>Several R examples in this vignette use the the <code>PhotoGEA</code>
and <code>lattice</code> packages, so we will load them now:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eloch216/PhotoGEA" class="external-link">PhotoGEA</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lattice.r-forge.r-project.org/" class="external-link">lattice</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="choosing-user-constants">Choosing User Constants<a class="anchor" aria-label="anchor" href="#choosing-user-constants"></a>
</h2>
<p>Before setting up your user constants through the Licor LI-6800
interface, it is necessary to decide which pieces of metadata to record.
Here are a few considerations to keep in mind when choosing them:</p>
<blockquote>
<p><em>User constants should generally reflect your experimental design
and the comparisons you eventually plan to make.</em></p>
</blockquote>
<p>For example, if you have a field experiment with two cultivars and
two treatments, it would make sense to include <code>cultivar</code> and
<code>treatment</code> as user constants.</p>
<blockquote>
<p><em>In combination, user constants should uniquely identify each
response curve in your data set.</em></p>
</blockquote>
<p>In the experiment above, if you plan to measure multiple biological
replicates from each cultivar and treatment, then <code>cultivar</code>
and <code>treatment</code> will not uniquely identify each measurement.
In this case it would make sense to also include a
<code>replicate</code> user constant.</p>
<blockquote>
<p><em>Don’t include too many user constants.</em></p>
</blockquote>
<p>Each user constant takes time and effort to define, and to update
during your measurements. Make sure each one has a clear purpose, and is
not redundant with another user constant.</p>
<div class="section level3">
<h3 id="examples-of-user-constants">Examples of User Constants<a class="anchor" aria-label="anchor" href="#examples-of-user-constants"></a>
</h3>
<p>Here are a few examples of user constants that have been used by
researchers:</p>
<ul>
<li><p><code>instrument</code>, <code>species</code>, <code>plot</code>,
and <code>replicate</code>: These were used for field measurements of
plants from different species, where there were multiple plots of each
species. Including the “nickname” for each instrument as a user constant
can make it easy to check for any instrument-specific bias in the
measurements.</p></li>
<li><p><code>machine</code>, <code>line</code>, <code>sample</code>,
<code>condition</code>: These were used for growth chamber measurements
of plants from different lineages that were grown under different
temperature conditions. Here, <code>sample</code> is an ID number that
plays the same role as <code>replicate</code> in some of the other
examples.</p></li>
<li><p><code>cultivar</code>, <code>plot</code>, <code>leaf_type</code>:
These were used for field measurements of plants from different
cultivars that were arranged in several plots. For each plot, two
different leaf types (sunlit and shaded) were measured.</p></li>
<li><p><code>instrument</code>, <code>plant_id</code>: This is a very
minimal example that is sufficient to uniquely identify each curve in
the set. Here, the researcher was using a randomized block design in a
greenhouse experiment, where each plant ID consisted of a block number
and a genotype, formatted like <code>block - genotype</code>. It is
possible to extract the block and genotype information from this ID, but
it probably would have been easier to use separate user constants for
<code>block</code> and <code>genotype</code> instead of a single
<code>plant_id</code>. See the <a href="#using-file-names-or-log-remarks">Using File Names or Log
Remarks</a> section for more details about extracting components of a
multi-part identifier.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="using-user-constants">Using User Constants<a class="anchor" aria-label="anchor" href="#using-user-constants"></a>
</h2>
<p>In practical terms, there are three main steps involved with using
Licor LI-6800 user constants:</p>
<ol style="list-style-type: decimal">
<li>Defining the user constants</li>
<li>Choosing logging options</li>
<li>Setting values of the user constants</li>
</ol>
<p>These will be discussed in the following three sections.</p>
<div class="section level3">
<h3 id="defining-the-user-constants">Defining the User Constants<a class="anchor" aria-label="anchor" href="#defining-the-user-constants"></a>
</h3>
<p>The “LI-6800 Operating Instructions” includes <a href="https://www.licor.com/support/LI-6800/topics/constants-tab.html#User" class="external-link">a
section about defining user constants</a>. This is a great place to
start, but it’s missing some important practical details:</p>
<blockquote>
<p><em>User constants must be defined before opening a log
file.</em></p>
</blockquote>
<p>The user constants will (potentially) be included as columns in the
log file, so so they must be defined before opening a log file. They can
be defined during warmup tests, which is a good time to get them sorted
out.</p>
<blockquote>
<p><em>User constant definitions are retained by each machine between
uses.</em></p>
</blockquote>
<p>Just like environmental settings (such as humiditity, temperature, or
light), user constant definitions are retained when a log file is closed
and when the machine is powered off. So, when you first start using a
machine, you may see user constant definitions from the previous
experiment it was used for. Just go ahead and replace these with your
own definitions.</p>
<blockquote>
<p><em>Always log user constants as columns, not as rows.</em></p>
</blockquote>
<p>Logging the user constants as rows breaks up the main data table in
the log file. A basic expectation for a table is that each row
represents a set of observations of each column. This is no longer true
when user constants are logged as rows, which makes the table difficult
to process.</p>
<blockquote>
<p><em>Never reset after logging.</em></p>
</blockquote>
<p>When the “reset to default after logging” option is selected, the
value of the user constant will change to its default after <em>a single
log</em>. If you are running a response curve, this means that the first
row in the curve will have the desired value of the user constant, and
then the remaining rows will have the default value. This is confusing.
Potentially, it could be acceptable to “reset to default after logging”
when making spot measurements, but even in this case it is not clear
what the benefit of resetting would be.</p>
<blockquote>
<p><em>It is rare to need a computed variable.</em></p>
</blockquote>
<p>Computed variables are almost never needed. The only exception is if
you want to see the value of a variable that is not included in a
typical log file, such as the Ball-Berry index (when measuring
Ball-Berry curves).</p>
<blockquote>
<p><em>Be consistent with spelling, capitalization, and spacing across
machines and replicates.</em></p>
</blockquote>
<p>If you are using multiple machines for a single experiment and plan
to eventually combine data from each separate log file, it is important
to use consistent spelling and capitalization across the user constant
definitions. For example, if one machine has a user constant called
<code>Species</code> and another has <code>species</code>, R will not
identify these as being the same column when reading log files.</p>
<blockquote>
<p><em>Consider using a dropdown menu.</em></p>
</blockquote>
<p>For user constants with simple values, setting values with the
keyboard/number pad is the best choice. For example, if the
<code>replicate</code> user constant will only take numeric values
<code>1</code> through <code>5</code>, then this would be easy to enter
using the keyboard. However, sometimes values are more complicated; for
example, the <code>construct_id</code> user constant might take values
<code>h1na</code>, <code>zg5b</code>, and <code>WT</code>. In this case,
spelling these out would be tedious and error-prone, and it would be
better to use a dropdown menu instead of the keyboard.</p>
<blockquote>
<p><em>Consider using a configuration file to define user
constants.</em></p>
</blockquote>
<p>User constant definitions can be saved to a <a href="https://www.licor.com/support/LI-6800/topics/startup-tab.html#Configuration" class="external-link">configuration
file</a>, which can then be transferred to a USB stick. From there, the
configuration file can be copied to other machines, and the definitions
can be loaded. This can save time and help ensure that user constants
use consistent spelling and capitalization across all machines.</p>
</div>
<div class="section level3">
<h3 id="choosing-logging-options">Choosing Logging Options<a class="anchor" aria-label="anchor" href="#choosing-logging-options"></a>
</h3>
<p>The “LI-6800 Operating Instructions” includes <a href="https://www.licor.com/support/LI-6800/topics/constants-tab.html#User" class="external-link">a
section about logging options</a>. One of the logging options pertains
to user constants.</p>
<blockquote>
<p><em>It is rare to prompt on manual logs.</em></p>
</blockquote>
<p>When the “prompt on (manual) logs” option is selected, a prompt
window will appear after making a manual log; the prompt will allow you
to enter values of each user constant. When measuring response curves,
manual logs are rarely made, so there is no strong reason to use this
option. It may be helpful when making spot measurements, though.</p>
</div>
<div class="section level3">
<h3 id="setting-values-of-the-user-constants">Setting Values of the User Constants<a class="anchor" aria-label="anchor" href="#setting-values-of-the-user-constants"></a>
</h3>
<p>The values of user constants can be set or changed at any time after
the constants themselves are defined. To do this, first make sure that
the “Edit/Reorder” checkbox is not selected. Then, simply click on a
user constant; a window will appear where you can type the new value or
select it from a dropdown menu.</p>
<p>If all the user constants are set to log as columns, each row in the
log file will contain the current value of each user constant. If none
of the user constants are set to “reset to default,” then their values
will remain at the values you have specified until you change them.</p>
<blockquote>
<p><em>Make user constants part of your measurement routine.</em></p>
</blockquote>
<p>Before clamping on to a new leaf, it is a good idea to double check
the environment variables, and to update user constants so they
accurately describe the new leaf. Make sure both of these steps are part
of your measurement routine. The machine itself will not automatically
remind you to update user constant values.</p>
<blockquote>
<p><em>Record metadata in a second place.</em></p>
</blockquote>
<p>User constants are a convenient way to ensure that your important
metadata is stored alongside the gas exchange data itself. However, it’s
easy to make mistakes in field conditions, and sometimes you will forget
to update user constants when clamping a new leaf or starting a new
curve. As an “insurance policy,” it is wise to record the metadata in a
second place, typically a paper lab notebook. In the paper record, just
indicate the sequence of samples that each machine measures throughout
the day. This will enable you to correct any errors in the user
constants.</p>
</div>
</div>
<div class="section level2">
<h2 id="examples-of-user-constant-applications">Examples of User Constant Applications<a class="anchor" aria-label="anchor" href="#examples-of-user-constant-applications"></a>
</h2>
<div class="section level3">
<h3 id="applying-an-operation-to-every-curve-in-a-data-set">Applying an Operation to Every Curve in a Data Set<a class="anchor" aria-label="anchor" href="#applying-an-operation-to-every-curve-in-a-data-set"></a>
</h3>
<p>We often want to apply an operation to every response curve in a data
set. This could be something relatively simple, such as plotting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>n</mi></msub><annotation encoding="application/x-tex">A_n</annotation></semantics></math>
values against
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mi>i</mi></msub><annotation encoding="application/x-tex">C_i</annotation></semantics></math>
values, or something more complicated, such as fitting the
Farquhar-von-Caemmerer-Berry model to estimate the values of key
photosynthetic parameters. In all such cases, a prerequisite is that we
must be able to identify each curve in the set.</p>
<p>User constants help to achieve this. For example, if every curve in
the set can be identified by its unique values of the
<code>species</code> and <code>plot</code> columns, then we can define a
new <code>curve_identifier</code> column by combining the values of
<code>species</code> and <code>plot</code>. Then, we can use this column
to split the set into chunks representing individual curves, and apply
an operation to each chunk.</p>
<p>Here is an example using a Licor log file that is included with the
PhotoGEA package. When this file was created, the researcher specified
the values of user constants called <code>species</code> and
<code>plot</code>. The file contains several Ball-Berry curves, which
are a special type of light response curve intended to be fit using the
Ball-Berry model:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read an example Licor file included in the PhotoGEA package</span></span>
<span><span class="va">licor_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_gasex_file.html">read_gasex_file</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/PhotoGEA_example_file_path.html">PhotoGEA_example_file_path</a></span><span class="op">(</span><span class="st">'ball_berry_1.xlsx'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a `curve_identifier` column based on the `species` and `plot` columns</span></span>
<span><span class="va">licor_file</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'species'</span><span class="op">]</span>,</span>
<span>  <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'plot'</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot A vs. Qin for each curve in the data set</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'A'</span><span class="op">]</span> <span class="op">~</span> <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'Qin'</span><span class="op">]</span> <span class="op">|</span> <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span>,</span>
<span>  type <span class="op">=</span> <span class="st">'b'</span>,</span>
<span>  pch <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">'Qin (micromol / m^2 / s)'</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">'A (micromol / m^2 / s)'</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="LI6800_user_constants_files/figure-html/unnamed-chunk-5-1.png" width="384"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get the number of measured points in each curve</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_file</span>,</span>
<span>  <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span>,</span>
<span>  <span class="va">nrow</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $`soybean 1a`</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`soybean 1b`</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`soybean 5`</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`tobacco 2`</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span></span>
<span><span class="co"># A more complex example: apply the `fit_ball_berry` function to each curve</span></span>
<span><span class="va">licor_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_total_pressure.html">calculate_total_pressure</a></span><span class="op">(</span><span class="va">licor_file</span><span class="op">)</span></span>
<span><span class="va">licor_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_gas_properties.html">calculate_gas_properties</a></span><span class="op">(</span><span class="va">licor_file</span><span class="op">)</span></span>
<span><span class="va">licor_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_ball_berry_index.html">calculate_ball_berry_index</a></span><span class="op">(</span><span class="va">licor_file</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bb_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/consolidate.html">consolidate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_file</span>,</span>
<span>  <span class="va">licor_file</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span>,</span>
<span>  <span class="va">fit_ball_berry</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="performing-statistical-operations">Performing Statistical Operations<a class="anchor" aria-label="anchor" href="#performing-statistical-operations"></a>
</h3>
<p>All fitting functions in PhotoGEA will preserve user constants in
their outputs, which makes it easy to perform statistical operations on
the resulting parameter estimates. Continuing with the example above, we
can calculate the mean Ball-Berry intercept for each species or plot the
mean Ball-Berry slope:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the Ball-Berry parameter estimates</span></span>
<span><span class="va">bb_parameters</span> <span class="op">&lt;-</span> <span class="va">bb_results</span><span class="op">$</span><span class="va">parameters</span></span>
<span></span>
<span><span class="co"># Calculate mean Ball-Berry intercept for each species</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span></span>
<span>  <span class="va">bb_parameters</span>,</span>
<span>  <span class="va">bb_parameters</span><span class="op">[</span>, <span class="st">'species'</span><span class="op">]</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="st">'bb_intercept'</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $soybean</span></span>
<span><span class="co">#&gt; [1] 0.1141754</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tobacco</span></span>
<span><span class="co">#&gt; [1] 0.09410874</span></span>
<span></span>
<span><span class="co"># Make barchart of mean Ball-Berry slope for each species</span></span>
<span><span class="fu"><a href="../reference/barchart_with_errorbars.html">barchart_with_errorbars</a></span><span class="op">(</span></span>
<span>  <span class="va">bb_parameters</span><span class="op">[</span>, <span class="st">'bb_slope'</span><span class="op">]</span>,</span>
<span>  <span class="va">bb_parameters</span><span class="op">[</span>, <span class="st">'species'</span><span class="op">]</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">'Ball-Berry slope (dimensionless)'</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="LI6800_user_constants_files/figure-html/unnamed-chunk-6-1.png" width="384"></p>
<p>This is a very simple example with a simple data set. More realistic
examples could perform stats tests or compute ANOVA tables.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-file-names-or-log-remarks">Using File Names or Log Remarks<a class="anchor" aria-label="anchor" href="#using-file-names-or-log-remarks"></a>
</h2>
<p>Besides user constants, there are other methods for digitally storing
metadata.</p>
<p>Perhaps the simplest approach is to include only one response curve
in each file, and use the file name to store the metadata. For example,
the file name could be formatted like
<code>YYYY-MM-DD species plot replicate.xlsx</code>.</p>
<p>Another option is to use <a href="https://www.licor.com/support/LI-6800/topics/log-files-tab.html#Logremark" class="external-link">log
remarks</a>, which are free-form text rows saved in the log file.
Remarks are intended for comments such as “Wow, this plant looks
terrible,” but they can be repurposed to store metadata. Following the
example above, the remark message could be something like
<code>species plot replicate</code>.</p>
<p>A downside to these approaches is that they only provide one field
for storing the metadata. In other words, in the examples above, instead
of creating separate columns for <code>species</code>,
<code>plot</code>, and <code>replicate</code>, these approaches would
create a single description of all three together. If you want to later
extract the individual <code>species</code>, <code>plot</code>, and
<code>replicate</code> values, it will be necessary to <a href="https://en.wikipedia.org/wiki/Parsing" class="external-link">“parse”</a> the combined
text string.</p>
<blockquote>
<p><em>User constants save time in the long run compared to storing
metadata in file names or remarks.</em></p>
</blockquote>
<p>Because of the “parsing issue,” it’s generally simpler and more
time-efficient to just make separate user constants for each important
piece of metadata. Although it’s often simple for a human to parse a
string, it can be difficult for a computer.</p>
<p>There is no general way to parse a string, but we discuss a few
options below.</p>
<div class="section level3">
<h3 id="automated-parsing-using-r">Automated Parsing Using R<a class="anchor" aria-label="anchor" href="#automated-parsing-using-r"></a>
</h3>
<p>Automated parsing can sometimes be accomplished in R with some
combination of the <code>strsplit</code>, <code>grep</code>, and
<code>gsub</code> functions.</p>
<p>Here is an example using <code>strsplit</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up a hypothetical user remark formatted like "species plot replicate"</span></span>
<span><span class="va">remark_message</span> <span class="op">&lt;-</span> <span class="st">'maize 2 3'</span></span>
<span></span>
<span><span class="co"># We can split this message into components that are separated by spaces</span></span>
<span><span class="va">split_remark_message</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">remark_message</span>, split <span class="op">=</span> <span class="st">' '</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">split_remark_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ : chr [1:3] "maize" "2" "3"</span></span>
<span></span>
<span><span class="co"># Then we can identify each component of the split message</span></span>
<span><span class="va">species</span>   <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">plot</span>      <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">replicate</span> <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">species</span>, plot <span class="op">=</span> <span class="va">plot</span>, replicate <span class="op">=</span> <span class="va">replicate</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ species  : chr "maize"</span></span>
<span><span class="co">#&gt;  $ plot     : chr "2"</span></span>
<span><span class="co">#&gt;  $ replicate: chr "3"</span></span></code></pre></div>
<p>It’s easy to imagine scenarios where this approach to parsing will
fail. For example, suppose a typo was made when making the remark, and
it was written as <code>maize2 3</code>. Let’s see what happens:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up a hypothetical user remark with a typo</span></span>
<span><span class="va">remark_message</span> <span class="op">&lt;-</span> <span class="st">'maize2 3'</span></span>
<span></span>
<span><span class="co"># We can split this message into components that are separated by spaces</span></span>
<span><span class="va">split_remark_message</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">remark_message</span>, split <span class="op">=</span> <span class="st">' '</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Then we can identify each component of the split message</span></span>
<span><span class="va">species</span>   <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">plot</span>      <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">replicate</span> <span class="op">&lt;-</span> <span class="va">split_remark_message</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">species</span>, plot <span class="op">=</span> <span class="va">plot</span>, replicate <span class="op">=</span> <span class="va">replicate</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ species  : chr "maize2"</span></span>
<span><span class="co">#&gt;  $ plot     : chr "3"</span></span>
<span><span class="co">#&gt;  $ replicate: chr NA</span></span></code></pre></div>
<p>Similar issues would occur if some of the remark components were
separated by dashes instead of spaces. Because of issues like this,
automated parsing can sometimes be very difficult and complex. Even just
detecting when spaces or dashes are used can require a lot of code, as
can be seen in <a href="https://github.com/eloch216/PhotoGEA/blob/04b7dff7638b5be4069a16ff8d6507fdd61b6542/example_scripts/gm_from_tdl.R#L173-L239" class="external-link">this
example</a>.</p>
<p>If there are just a few mistakes with the remarks, they can be
manually fixed by editing the log files before reading them. However,
there is no limit to the number of formatting issues that could
potentially occur. You may think you can perfectly follow a clear format
for all of your remarks, but everyone makes mistakes.</p>
</div>
<div class="section level3">
<h3 id="manual-parsing-using-r">Manual Parsing Using R<a class="anchor" aria-label="anchor" href="#manual-parsing-using-r"></a>
</h3>
<p>It is possible to side-step the complexities of automated parsing by
using code that manually sets the values of individual metadata
variables based on the value of the file name or user remark. For
example, continuing the example above, we could do something like the
following:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">remark_message</span> <span class="op">==</span> <span class="st">'maize2 3'</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">species</span>   <span class="op">&lt;-</span> <span class="st">'maize'</span></span>
<span>  <span class="va">plot</span>      <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span>  <span class="va">replicate</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">species</span>, plot <span class="op">=</span> <span class="va">plot</span>, replicate <span class="op">=</span> <span class="va">replicate</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ species  : chr "maize"</span></span>
<span><span class="co">#&gt;  $ plot     : num 2</span></span>
<span><span class="co">#&gt;  $ replicate: num 3</span></span></code></pre></div>
<p>When interpreting many different file names or remarks, this
alternative to parsing can be streamlined a bit by using PhotoGEA’s
<code>set_variable</code> function, but it will always be tedious.
Here’s an example of how this could be done:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Say we have a data frame of spot measurements that also includes user remarks</span></span>
<span><span class="co"># with inconsistent formatting</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>, <span class="fl">1.4</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>  Ci <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">291</span>, <span class="fl">292</span>, <span class="fl">293</span>, <span class="fl">294</span>, <span class="fl">295</span><span class="op">)</span>,</span>
<span>  user_remark <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'maize 2 3'</span>, <span class="st">'maize-1 4'</span>, <span class="st">'soybean3 1'</span>, <span class="st">'maiz 5 6'</span>, <span class="st">'3 2 soybean'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;     A  Ci user_remark</span></span>
<span><span class="co">#&gt; 1 1.1 291   maize 2 3</span></span>
<span><span class="co">#&gt; 2 1.2 292   maize-1 4</span></span>
<span><span class="co">#&gt; 3 1.3 293  soybean3 1</span></span>
<span><span class="co">#&gt; 4 1.4 294    maiz 5 6</span></span>
<span><span class="co">#&gt; 5 1.5 295 3 2 soybean</span></span>
<span></span>
<span><span class="co"># Now we can manually parse the remarks using `set_variable`</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_variable.html">set_variable</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_data</span>,</span>
<span>  <span class="st">'species'</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">'user_remark'</span>,</span>
<span>  value_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    `maize 2 3`   <span class="op">=</span> <span class="st">'maize'</span>,</span>
<span>    `maize-1 4`   <span class="op">=</span> <span class="st">'maize'</span>,</span>
<span>    `soybean3 1`  <span class="op">=</span> <span class="st">'soybean'</span>,</span>
<span>    `maiz 5 6`    <span class="op">=</span> <span class="st">'maize'</span>,</span>
<span>    `3 2 soybean` <span class="op">=</span> <span class="st">'soybean'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_variable.html">set_variable</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_data</span>,</span>
<span>  <span class="st">'plot'</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">'user_remark'</span>,</span>
<span>  value_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    `maize 2 3`   <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    `maize-1 4`   <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    `soybean3 1`  <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    `maiz 5 6`    <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    `3 2 soybean` <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_variable.html">set_variable</a></span><span class="op">(</span></span>
<span>  <span class="va">licor_data</span>,</span>
<span>  <span class="st">'replicate'</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">'user_remark'</span>,</span>
<span>  value_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    `maize 2 3`   <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    `maize-1 4`   <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    `soybean3 1`  <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    `maiz 5 6`    <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    `3 2 soybean` <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;     A  Ci user_remark species plot replicate</span></span>
<span><span class="co">#&gt; 1 1.1 291   maize 2 3   maize    2         3</span></span>
<span><span class="co">#&gt; 2 1.2 292   maize-1 4   maize    1         4</span></span>
<span><span class="co">#&gt; 3 1.3 293  soybean3 1 soybean    3         1</span></span>
<span><span class="co">#&gt; 4 1.4 294    maiz 5 6   maize    5         6</span></span>
<span><span class="co">#&gt; 5 1.5 295 3 2 soybean soybean    3         2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manual-parsing-using-excel">Manual Parsing Using Excel<a class="anchor" aria-label="anchor" href="#manual-parsing-using-excel"></a>
</h3>
<p>If you are working with Excel log files, it’s also possible to
manually add new columns for the individual metadata variables, and fill
them in with the appropriate values. This can be time-consuming and
tedious, especially if you have many files to process, but sometimes it
might be the best option.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-to-deal-with-files-that-have-no-metadata">How To Deal With Files That Have No Metadata<a class="anchor" aria-label="anchor" href="#how-to-deal-with-files-that-have-no-metadata"></a>
</h2>
<p>Sometimes you may find yourself working with files that do not
contain any helpful metadata in the form of user constants or remarks,
or even in the file names. Don’t worry – there are ways to deal with
this situation, as long as the metadata is available
<em>somewhere</em>.</p>
<div class="section level3">
<h3 id="adding-metadata-in-r">Adding Metadata in R<a class="anchor" aria-label="anchor" href="#adding-metadata-in-r"></a>
</h3>
<p>It may require some creativity, but there is usually a way to add a
basic curve identifier to a data set in R.</p>
<p>For example, suppose the files contain response curves that all have
17 points. In these files, observations 1–17 will constitute one curve,
observations 18–34 will constitute the next curve, and so on. In this
case, the following code could be used to add a curve identifier column
based on the file name and a sequential curve number:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify the number of points in each curve</span></span>
<span><span class="va">pts_in_curve</span> <span class="op">&lt;-</span> <span class="fl">17</span></span>
<span></span>
<span><span class="co"># Create a new identifier column formatted like `file_name - curve_number`</span></span>
<span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html" class="external-link">file_path_sans_ext</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'file_name'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'obs'</span><span class="op">]</span> <span class="op">/</span> <span class="va">pts_in_curve</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">' - '</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Of course, this code may have some problems if some curves have
different numbers of points, or if a manual log was accidentally made
(so that the values of <code>obs</code> don’t line up properly). That’s
why creativity may be required.</p>
<p>Once the basic curve identifier has been added, values of metadata
can be added following the <code>set_variable</code> strategy described
in the <a href="#manual-parsing-using-r">Manual Parsing Using R</a>
section.</p>
</div>
<div class="section level3">
<h3 id="adding-metadata-in-excel">Adding Metadata in Excel<a class="anchor" aria-label="anchor" href="#adding-metadata-in-excel"></a>
</h3>
<p>If you are working with Excel log files, it’s also possible to
manually add new columns for the individual metadata variables, and fill
them in with the appropriate values. This can be time-consuming and
tedious, especially if you have many files to process, but sometimes it
might be the best option.</p>
</div>
</div>
<div class="section level2">
<h2 id="summary-of-advice-for-using-licor-li-6800-user-constants">Summary of Advice for Using Licor LI-6800 User Constants<a class="anchor" aria-label="anchor" href="#summary-of-advice-for-using-licor-li-6800-user-constants"></a>
</h2>
<ul>
<li><p>User constants should generally reflect your experimental design
and the comparisons you eventually plan to make.</p></li>
<li><p>In combination, user constants should uniquely identify each
response curve in your data set.</p></li>
<li><p>User constants must be defined before opening a log
file.</p></li>
<li><p>User constant definitions are retained by each machine between
uses.</p></li>
<li><p>Always log user constants as columns, not as rows.</p></li>
<li><p>Never reset after logging.</p></li>
<li><p>It is rare to need a computed variable.</p></li>
<li><p>Be consistent with spelling, capitalization, and spacing across
machines and replicates.</p></li>
<li><p>Consider using a dropdown menu.</p></li>
<li><p>Consider using a configuration file to define user
constants.</p></li>
<li><p>It is rare to prompt on manual logs.</p></li>
<li><p>Make user constants part of your measurement routine.</p></li>
<li><p>Record metadata in a second place.</p></li>
<li><p>User constants save time in the long run compared to storing
metadata in file names or remarks.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edward B. Lochocki, Coralie E. Salesse-Smith, Justin M. McGrath.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
