<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Frequently Asked Questions • PhotoGEA</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Frequently Asked Questions">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    padding-top: 70px;

    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">PhotoGEA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../articles/PhotoGEA.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides">
<li><h6 class="dropdown-header" data-toc-skip>ANALYSIS GUIDES</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../articles/web_only/analyzing_ball_berry_data.html">Analyzing Ball-Berry Data</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/analyzing_c3_aci_curves.html">Analyzing C3 A-Ci Curves</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/analyzing_c4_aci_curves.html">Analyzing C4 A-Ci Curves</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/analyzing_gm_data.html">Analyzing Mesophyll Conductance Data</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/analyzing_tdl_data.html">Analyzing TDL Data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>GENERAL PHOTOGEA ADVICE</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../articles/web_only/combining_with_other_packages.html">Combining PhotoGEA With Other Packages</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/creating_your_own_processing_tools.html">Creating Your Own Processing Tools</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/developing_a_data_analysis_pipeline.html">Developing a Data Analysis Pipeline</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/working_with_extended_data_frames.html">Working With Extended Data Frames</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/frequent_questions.html">Frequently Asked Questions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>GENERAL GAS EXCHANGE ADVICE</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../articles/web_only/LI6800_user_constants.html">Guide to Licor LI-6800 User Constants</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../articles/web_only/publications.html">Publications</a></li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/eloch216/PhotoGEA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.svg" class="logo" alt=""><h1>Frequently Asked Questions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/eloch216/PhotoGEA/blob/cran-compliance/vignettes/web_only/frequent_questions.Rmd" class="external-link"><code>vignettes/web_only/frequent_questions.Rmd</code></a></small>
      <div class="d-none name"><code>frequent_questions.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-do-i-install-the-latest-release-of-photogea">How Do I Install The Latest Release of PhotoGEA?<a class="anchor" aria-label="anchor" href="#how-do-i-install-the-latest-release-of-photogea"></a>
</h2>
<p><code>PhotoGEA</code> is available on CRAN, so the easiest way to
install the latest release is to type the following from within an R
terminal:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'PhotoGEA'</span><span class="op">)</span></span></code></pre></div>
<p>There may be a short period of time where a new version has been
released but is not yet available on CRAN. In this case, the latest
release can be installed directly from the main branch of the GitHub
repository by typing the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'eloch216/PhotoGEA'</span><span class="op">)</span></span></code></pre></div>
<p>Note that this method requires the <code>remotes</code> package,
which can be installed from within R by typing
<code>install.packages('remotes')</code>.</p>
</div>
<div class="section level2">
<h2 id="how-do-i-install-an-old-version-of-photogea">How Do I Install An Old Version of PhotoGEA?<a class="anchor" aria-label="anchor" href="#how-do-i-install-an-old-version-of-photogea"></a>
</h2>
<p>All <code>PhotoGEA</code> releases are tagged on GitHub, and the tag
names are formatted as <code>vX.Y.Z</code>, where <code>X.Y.Z</code> is
the version number. Because of this,
<code>remotes::install_github</code> can be used to install old versions
from within R, supplying the appropriate tag name as the
<code>ref</code> input argument. For example, version <code>1.0.0</code>
can be installed as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'eloch216/PhotoGEA'</span>, ref <span class="op">=</span> <span class="st">'v1.0.0'</span><span class="op">)</span></span></code></pre></div>
<p>Note that this command requires the <code>remotes</code> package,
which can be installed from within R by typing
<code>install.packages('remotes')</code>.</p>
</div>
<div class="section level2">
<h2 id="how-do-i-install-the-development-version-of-photogea">How Do I Install The Development Version of PhotoGEA?<a class="anchor" aria-label="anchor" href="#how-do-i-install-the-development-version-of-photogea"></a>
</h2>
<p>The development version of <code>PhotoGEA</code> contains the latest
changes, although it may be a “work in progress” and subject to suddent
changes without any warning. It can always be found on the
<code>unreleased</code> branch on GitHub, and the package can be
installed from this branch as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'eloch216/PhotoGEA'</span>, ref <span class="op">=</span> <span class="st">'unreleased'</span><span class="op">)</span></span></code></pre></div>
<p>Note that this command requires the <code>remotes</code> package,
which can be installed from within R by typing
<code>install.packages('remotes')</code>.</p>
</div>
<div class="section level2">
<h2 id="what-should-i-do-when-check_response_curve_data-fails">What Should I Do When check_response_curve_data Fails?<a class="anchor" aria-label="anchor" href="#what-should-i-do-when-check_response_curve_data-fails"></a>
</h2>
<p>When beginning to work with a new data set, it is fairly common to
encounter problems that cause <code>check_response_curve_data</code> to
fail. The most common issues are:</p>
<ul>
<li><p>The manual log button was accidentally pressed while measuring,
causing a response curve to have an extra point.</p></li>
<li><p>One or more “User Constant” was not updated before starting a to
measure a new curve, causing two curves to have the same identifying
metadata.</p></li>
<li><p>A curve was started, but needed to be ended early, resulting in a
curve with fewer points than expected.</p></li>
</ul>
<p>These are exactly the kinds of issues that
<code>check_response_curve_data</code> is designed to detect. It may
feel irritating to encounter these errors, but it’s better to know about
issues with extra log points or user constants early in your analysis,
before they cause additional downstream issues.</p>
<p>In each of these cases, it is often simplest to fix the issues by
manually editing the log files in Excel. This is an easy way to delete
extra rows or alter the values of user constants. When altering log
files, it is always a good idea to keep an “original” version in case
any of the changes need to be reverted.</p>
<p>Sometimes <code>check_response_curve_data</code> fails for a
different reason – for example, perhaps different setpoint sequences
were intentionally used while measuring the curves, or perhaps you have
already cleaned up your data in Excel. In these cases, please see the
“What If My Response Curves Have Different Numbers of Points?” and “What
If I Clean My Data In Excel?” sections of this article.</p>
</div>
<div class="section level2">
<h2 id="what-if-my-response-curves-have-different-numbers-of-points">What If My Response Curves Have Different Numbers of Points?<a class="anchor" aria-label="anchor" href="#what-if-my-response-curves-have-different-numbers-of-points"></a>
</h2>
<p>The analysis guides use data sets where each response curve has the
same number of points, making it easy to apply
<code>check_response_curve_data</code> and
<code>organize_response_curve_data</code>. However, data sets may
sometimes have curves measured using different sequences of
setpoints.</p>
<p>To deal with this situation, one strategy is to split the full set
into groups that are expected to use the same sequences, then separately
check and organize each group, and finally recombine all the groups back
together. The code snippets below show two examples of how this could be
accomplished.</p>
<div class="section level3">
<h3 id="splitting-response-curves-according-to-the-number-of-points-in-each-curve">Splitting response curves according to the number of points in each
curve<a class="anchor" aria-label="anchor" href="#splitting-response-curves-according-to-the-number-of-points-in-each-curve"></a>
</h3>
<p>The following code would replace the calls to
<code>check_response_curve_data</code> and
<code>organize_response_curve_data</code> in the user guides. This code
was originally written for a set of A-Ci curves that used different
numbers of recovery points. The user wished to keep the final recovery
point to use for subsequent analysis.</p>
<p>The curves used the following sequences of <code>CO2_r</code>
setpoint values:</p>
<ul>
<li><p>16 points: 400, 300, 200, 120, 70, 30, 10, 400, 400, 400, 600,
800, 1200, 1500, 1800, 400</p></li>
<li><p>18 points: 400, 300, 200, 120, 70, 30, 10, 400, 400, 400, 400,
400, 600, 800, 1200, 1500, 1800, 400</p></li>
<li><p>19 points: 400, 300, 200, 120, 70, 30, 10, 400, 400, 400, 400,
400, 400, 600, 800, 1200, 1500, 1800, 400</p></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a new column called `curve_npts` that stores the number of points in each</span></span>
<span><span class="co"># response curve</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">licor_data</span>, <span class="va">licor_data</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op">[</span>, <span class="st">'curve_npts'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choose points to remove, depending on how many points are in the curve</span></span>
<span><span class="va">pts_to_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">'16'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">9</span>,  <span class="fl">16</span><span class="op">)</span>,</span>
<span>  <span class="st">'18'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">11</span>, <span class="fl">18</span><span class="op">)</span>,</span>
<span>  <span class="st">'19'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">19</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check and process each group of curves depending on how many points are in the</span></span>
<span><span class="co"># curve</span></span>
<span><span class="va">licor_exdf_list_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">licor_data</span>, <span class="va">licor_data</span><span class="op">[</span>, <span class="st">'curve_npts'</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Get the number of points in these curves</span></span>
<span>  <span class="va">npts</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span>, <span class="st">'curve_npts'</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># Make sure info is specified for this group of curves</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">npts</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">pts_to_remove</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">'Points to remove were not specified for npts = `'</span>, <span class="va">npts</span>, <span class="st">'`'</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Make sure the data meets basic requirements</span></span>
<span>  <span class="fu"><a href="../../reference/check_response_curve_data.html">check_response_curve_data</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">'curve_identifier'</span>, <span class="va">npts</span>, <span class="st">'CO2_r_sp'</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Remove points with duplicated `CO2_r_sp` values and order by `Ci`</span></span>
<span>  <span class="fu"><a href="../../reference/organize_response_curve_data.html">organize_response_curve_data</a></span><span class="op">(</span></span>
<span>    <span class="va">x</span>,</span>
<span>    <span class="st">'curve_identifier'</span>,</span>
<span>    <span class="va">pts_to_remove</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">npts</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">'Ci'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `rbind` to recombine all the data</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">licor_exdf_list_processed</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="splitting-the-response-curves-according-to-the-date-they-were-measured-and-the-number-of-points-in-each-curve">Splitting the response curves according to the date they were
measured and the number of points in each curve<a class="anchor" aria-label="anchor" href="#splitting-the-response-curves-according-to-the-date-they-were-measured-and-the-number-of-points-in-each-curve"></a>
</h3>
<p>This code would replace the calls to
<code>check_response_curve_data</code> and
<code>organize_response_curve_data</code> in the user guides. This code
was originally written for a set of A-Ci curves that used different
sequences of <code>CO2_r</code> setpoints on different days.</p>
<p>The curves used the following sequences of <code>CO2_r</code>
setpoint values:</p>
<ul>
<li><p>2023-03-21: 18 points: 400, 300, 200, 150, 100, 75, 50, 40, 30,
20, 10, 400, 400, 600, 800, 1000, 1200, 1500</p></li>
<li><p>2023-03-23: 19 points: 400, 300, 200, 150, 100, 75, 50, 40, 30,
20, 10, 400, 400, 500, 600, 800, 1000, 1200, 1500</p></li>
<li><p>2023-03-24: 19 points: 400, 300, 200, 150, 100, 75, 50, 40, 30,
20, 400, 400, 450, 500, 600, 800, 1000, 1200, 1500</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a new column called `curve_npts` that stores the number of points in each</span></span>
<span><span class="co"># response curve</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">licor_data</span>, <span class="va">licor_data</span><span class="op">[</span>, <span class="st">'curve_identifier'</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op">[</span>, <span class="st">'curve_npts'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a new column called `date_ymd` that stores the date formatted as</span></span>
<span><span class="co"># YYYY-MM-DD</span></span>
<span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date_ymd'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date'</span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date'</span><span class="op">]</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date'</span><span class="op">]</span>, <span class="fl">7</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">'-'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a new column called `date_ymd_npts` that combines the date and the number</span></span>
<span><span class="co"># of points</span></span>
<span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date_ymd_npts'</span><span class="op">]</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date_ymd'</span><span class="op">]</span>, <span class="va">licor_data</span><span class="op">[</span>, <span class="st">'curve_npts'</span><span class="op">]</span>, sep <span class="op">=</span> <span class="st">' - '</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choose points to remove, depending on the date the curve was measured and the</span></span>
<span><span class="co"># number of points it contains</span></span>
<span><span class="va">pts_to_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">'2023-03-21 - 18'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  <span class="st">'2023-03-23 - 19'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  <span class="st">'2023-03-24 - 19'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check and process each group of curves depending on the date and the number of</span></span>
<span><span class="co"># points</span></span>
<span><span class="va">licor_exdf_list_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">licor_data</span>, <span class="va">licor_data</span><span class="op">[</span>, <span class="st">'date_ymd_npts'</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Get the date and number of points in these curves</span></span>
<span>  <span class="va">date_ymd_npts</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span>, <span class="st">'date_ymd_npts'</span><span class="op">]</span></span>
<span>  <span class="va">npts</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span>, <span class="st">'curve_npts'</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># Make sure info is specified for this group of curves</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">date_ymd_npts</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">pts_to_remove</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">'Points to remove were not specified for date_ymd_npts = `'</span>, <span class="va">date_ymd_npts</span>, <span class="st">'`'</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Make sure the data meets basic requirements</span></span>
<span>  <span class="fu"><a href="../../reference/check_response_curve_data.html">check_response_curve_data</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">'curve_identifier'</span>, <span class="va">npts</span>, <span class="st">'CO2_r_sp'</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Remove points with duplicated `CO2_r_sp` values and order by `Ci`</span></span>
<span>  <span class="fu"><a href="../../reference/organize_response_curve_data.html">organize_response_curve_data</a></span><span class="op">(</span></span>
<span>    <span class="va">x</span>,</span>
<span>    <span class="st">'curve_identifier'</span>,</span>
<span>    <span class="va">pts_to_remove</span><span class="op">[[</span><span class="va">date_ymd_npts</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">'Ci'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `rbind` to recombine all the data</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">licor_exdf_list_processed</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="what-if-i-clean-my-data-in-excel">What If I Clean My Data In Excel?<a class="anchor" aria-label="anchor" href="#what-if-i-clean-my-data-in-excel"></a>
</h2>
<p>In the user guides, the <code>organize_response_curve_data</code> and
<code>remove_points</code> functions are used to remove recovery points
and other points from sets of response curves. However, it is also
possible to remove points in Excel before reading log files into R. In
this case, it is necessary to make a few small alterations to the code
used in the user guides.</p>
<p>One consideration is that after cleaning the curves in Excel, it is
likely that not all curves have the same number of points or follow the
same sequence of setpoint values. Because of this, the checks in
<code>check_response_curve_data</code> are likely to fail. In this case,
we recommend setting <code>expected_npts</code> to 0 (the default value)
and <code>error_on_failure</code> to <code>FALSE</code> when calling
<code>check_response_curve_data</code>. This will provide potentially
useful information about the number of points in each curve, but won’t
throw an error that would cause a script to stop running.</p>
<p>Another consideration is that
<code>organize_response_curve_data</code> is not needed to remove any
points from the curves. Yet, its other features, such as reordering the
points and calculating average values, are still useful. In this case,
we recommend setting <code>measurement_numbers_to_remove</code> to
<code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> and leaving the other arguments as-is.</p>
<p>Putting this all together would produce something like the following
code, which would replace the regular calls to
<code>check_response_curve_data</code> and
<code>organize_response_curve_data</code> from the user guides:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print info about the number of points in each curve to make sure</span></span>
<span><span class="co"># `curve_identifier` is able to properly split the set into individual curves</span></span>
<span><span class="fu"><a href="../../reference/check_response_curve_data.html">check_response_curve_data</a></span><span class="op">(</span><span class="va">licor_data</span>, <span class="st">'curve_identifier'</span>, error_on_failure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reorder by `Ci` and calculate average values of leaf temperature and Qin</span></span>
<span><span class="va">licor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/organize_response_curve_data.html">organize_response_curve_data</a></span><span class="op">(</span></span>
<span>    <span class="va">licor_data</span>,</span>
<span>    <span class="st">'curve_identifier'</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="st">'Ci'</span>,</span>
<span>    columns_to_average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'TleafCnd'</span>, <span class="st">'Qin'</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="what-if-i-have-log-files-from-a-licor-li-6400-pp-systems-ciras-or-other-gas-exchange-measurement-system">What If I Have Log Files From a Licor LI-6400, PP Systems CIRAS, or
Other Gas Exchange Measurement System?<a class="anchor" aria-label="anchor" href="#what-if-i-have-log-files-from-a-licor-li-6400-pp-systems-ciras-or-other-gas-exchange-measurement-system"></a>
</h2>
<p>At the moment, <code>PhotoGEA</code> can read plaintext and Excel
files created by Licor LI-6800 gas exchange measurement systems, but
does not have functions for reading log files from other
instruments.</p>
<p>Fortunately, there are other R packages that do, such as <a href="https://doi.org/10.1093/aobpla/plae035" class="external-link">GasanalyzeR</a>. Using a
function from another package is a little complicated, because generally
they do not use the same data structures or variable names as
<code>PhotoGEA</code>. So, after reading a file with another package,
there is typically some extra “conversion” that needs to take place.</p>
<p>The following example shows how to create a wrapper for the
<code>read_6400_xls</code> function from the <code>gasanalyzer</code> R
package. It also provides a simple function that “detects” the file
type, so a mix of Licor LI-6400 and LI-6800 log files could be used. The
code in the example would replace the lines that use
<code>read_gasex_file</code> to create <code>licor_exdf_list</code> in
the user guides.</p>
<p>As of the time this article was written (April 4, 2025), the
<code>read_6400_xls</code> function is not available in the CRAN version
of the <code>gasanalyzer</code> package. Instead, the package must be
installed directly from its GitLab repository to get the latest version.
This can be done by calling the following command from R:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_gitlab</span><span class="op">(</span><span class="st">'plantphys/gasanalyzer'</span><span class="op">)</span></span></code></pre></div>
<p>This example only processes the columns that are absolutely essential
for fitting A-Ci curves. Depending on your goals, you may need to modify
this code to include other columns.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Helper function for reading 6400 Excel files. This is a wrapper for the</span></span>
<span><span class="co"># read_6400_xls function from the gasanalyzer package that converts the output</span></span>
<span><span class="co"># into a format usable by PhotoGEA.</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Debug option: If DEBUG_PRINT is set to TRUE below, the raw column names will</span></span>
<span><span class="co"># be printed immediately after the file is loaded. This may be helpful if there</span></span>
<span><span class="co"># are other columns (such as user constants) that also need to be renamed.</span></span>
<span><span class="va">read_6400_xls_wrapper</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Read the contents of the file</span></span>
<span>    <span class="va">rawdata</span> <span class="op">&lt;-</span> <span class="fu">gasanalyzer</span><span class="fu">::</span><span class="fu">read_6400_xls</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Optional debug printing</span></span>
<span>    <span class="va">DEBUG_PRINT</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">DEBUG_PRINT</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rawdata</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># Rename a few columns so they meet PhotoGEA's expectations; the "new"</span></span>
<span>    <span class="co"># PhotoGEA column name is on the left, and the "original" gasanalyzer</span></span>
<span>    <span class="co"># column name is on the right.</span></span>
<span>    <span class="va">new_column_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        A <span class="op">=</span> <span class="st">'GasEx.A'</span>,</span>
<span>        Ca <span class="op">=</span> <span class="st">'GasEx.Ca'</span>,</span>
<span>        Ci <span class="op">=</span> <span class="st">'GasEx.Ci'</span>,</span>
<span>        DeltaPcham <span class="op">=</span> <span class="st">'Meas.DeltaPcham'</span>,</span>
<span>        gsw <span class="op">=</span> <span class="st">'GasEx.gsw'</span>,</span>
<span>        oxygen <span class="op">=</span> <span class="st">'Const.Oxygen'</span>,</span>
<span>        Pa <span class="op">=</span> <span class="st">'Meas.Pa'</span>,</span>
<span>        Qin <span class="op">=</span> <span class="st">'LeafQ.Qin'</span>,</span>
<span>        TleafCnd <span class="op">=</span> <span class="st">'GasEx.TleafCnd'</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">new_column_names</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">gasanalyzer_name</span> <span class="op">&lt;-</span> <span class="va">new_column_names</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="va">photogea_name</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">new_column_names</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rawdata</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rawdata</span><span class="op">)</span> <span class="op">==</span> <span class="va">gasanalyzer_name</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">photogea_name</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># Drop units and convert to a regular data frame</span></span>
<span>    <span class="va">rawdata_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">units</span><span class="fu">::</span><span class="fu">drop_units</span><span class="op">(</span><span class="va">rawdata</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Convert to an exdf object</span></span>
<span>    <span class="va">exdf_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/exdf.html">exdf</a></span><span class="op">(</span><span class="va">rawdata_df</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Supply units for a few columns so they meet PhotoGEA's expectations, and</span></span>
<span>    <span class="co"># return</span></span>
<span>    <span class="fu"><a href="../../reference/document_variables.html">document_variables</a></span><span class="op">(</span></span>
<span>        <span class="va">exdf_obj</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'A'</span>,          <span class="st">'micromol m^(-2) s^(-1)'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'Ca'</span>,         <span class="st">'micromol mol^(-1)'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'Ci'</span>,         <span class="st">'micromol mol^(-1)'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'DeltaPcham'</span>, <span class="st">'kPa'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'gsw'</span>,        <span class="st">'mol m^(-2) s^(-1)'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'oxygen'</span>,     <span class="st">'percent'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'Pa'</span>,         <span class="st">'kPa'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'Qin'</span>,        <span class="st">'micromol m^(-2) s^(-1)'</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'read_6400_xls_wrapper'</span>, <span class="st">'TleafCnd'</span>,   <span class="st">'degrees C'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Helper function that tries to read a file using PhotoGEA::read_gasex_file, but</span></span>
<span><span class="co"># then uses `read_6400_xls_wrapper` if there is an error.</span></span>
<span><span class="va">read_gasex_file_plus_6400</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">'\nAttempting to read `'</span>, <span class="va">fpath</span>, <span class="st">'` using PhotoGEA::read_gasex_file\n'</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../../reference/read_gasex_file.html">read_gasex_file</a></span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>        <span class="st">'\nAn error occurred. Attempting to read `'</span>, <span class="va">fpath</span>,</span>
<span>        <span class="st">'` using gasanalyzer::read_6400_xls\n'</span></span>
<span>      <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu">read_6400_xls_wrapper</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Load each file, storing the result in a list</span></span>
<span><span class="va">licor_exdf_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">file_paths</span>, <span class="kw">function</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">read_gasex_file_plus_6400</span><span class="op">(</span><span class="va">fpath</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="what-if-my-files-dont-have-user-constants-or-other-metadata">What If My Files Don’t Have User Constants or Other Metadata?<a class="anchor" aria-label="anchor" href="#what-if-my-files-dont-have-user-constants-or-other-metadata"></a>
</h2>
<p>Please see the <a href="LI6800_user_constants.html">Guide to Licor
LI-6800 User Constants</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edward B. Lochocki, Coralie E. Salesse-Smith, Justin M. McGrath.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
